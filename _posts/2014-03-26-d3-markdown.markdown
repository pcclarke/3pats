---
layout: post
title:  "Length of Canadian Election Campaigns"
date:   2014-03-26 13:12:00
---

There has been much discussion about how long this election campaign is. How does it compare to past campaign lengths?

<style>

div.example {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

.writdatalabel {
	fill: white;
}

</style>

<script src="http://d3js.org/d3.v3.min.js"></script>
<!--<script src="{{ site.baseurl }}/d3.min.js"></script>-->
<script>

var margin = {top: 10, right: 50, bottom: 20, left: 50},
    w = 740,
    h = 1000,
	barpadding = 1;
	
var format = d3.time.format("%Y-%m-%d");
	
var writdata = [];
var dissolutionData = [];
var dissolutionLabels = [];
var labels = [];
var dissolutionDates = [];
var writDates = [];
var writLabels = []
var electionDates = [];

var lastElectionDate1;
var lastElectionDate2;
var lastDissolutionData2;
var writData1 = [];
var writData2 = [];

d3.csv("{{ site.baseurl }}/data/election_lengths.csv", function(error, csv) {
	// SCALING
	/*var xScale = d3.scale.linear()
				.domain([0, 100])
				.range([margin.left, w - margin.right]);
	var yScale = d3.scale.linear()
				.domain([0, csv.length])
				.range([h - margin.bottom, margin.top]);*/
			
	// SET UP CHART
	var svg = d3.select(".chart")
				.append("svg")
				.attr("width", w)
				.attr("height", h);

	// PROCESS DATA FROM CSV
	csv.forEach(function(d, i) {
		labels.push(d["General Election"]);
		dissolutionDates.push(format.parse(d["Dissolution of Previous Parliament (yyyy-mm-dd)"]));
		writDates.push(format.parse(d["Writs Issued (yyyy-mm-dd)"]));
		dissolutionLabels.push(+(d["Number of Days from Dissolution to Election"]));
		writLabels.push(d["Number of Days from Writ to Election"]);
		if ((+d["Election #"]) > 2) {
			electionDates.push(format.parse(d["Election Day (yyyy-mm-dd)"]));
			dissolutionData.push(+(d["Number of Days from Dissolution to Election"]));
			writdata.push(+(d["Number of Days from Writ to Election"]));
		} else {
			var firstElectionDate = d["Election Day (yyyy-mm-dd)"].substring(0, 10);
			var lastElectionDate = d["Election Day (yyyy-mm-dd)"].substring(11);
			electionDates.push(format.parse(firstElectionDate));
			writdata.push(+(d["Number of Days from Writ to Election"].substring(0, 1)));
			if ((+d["Election #"]) == 1) {
				lastElectionDate1 = format.parse(lastElectionDate);
				dissolutionData.push(+(d["Number of Days from Dissolution to Election"]));
				writData1.push(+(d["Number of Days from Writ to Election"].substring(0, 1)));
				writData1.push(+(d["Number of Days from Writ to Election"].substring(2)));
				writData1.push(i);
			} else {
				lastElectionDate2 = format.parse(lastElectionDate);
				writData2.push(+(d["Number of Days from Writ to Election"].substring(0, 1)));
				writData2.push(+(d["Number of Days from Writ to Election"].substring(2)));
				writData2.push(i);
				dissolutionData.push(+(d["Number of Days from Dissolution to Election"].substring(0, 2)));
				lastDissolutionData2 = +(d["Number of Days from Dissolution to Election"].substring(3));
			}
		}
	});

	// DISPLAY ELECTION # LABELS
	svg.selectAll("text")
		.data(labels)
		.enter()
		.append("text")
		.text(function(d) {
			return(d);
		})
		.attr("x", function(d) {
	        return 0;
	   })
	   .attr("y", function(d, i) {
		   return i * (h / writdata.length) + 17;
	   })
	   .attr("class", "label");
	
	// DISPLAY WRIT BARS
	svg.selectAll("writbars")
	    .data(writdata)
	    .enter()
		.append("rect")
	    .attr("x", function(d) {
	    	return margin.left;
	    })
		.attr("y", function(d, i) {
	    	return i * (h / writdata.length);
		})
		.attr("width", function(d) {
			return d * 5;
		})
		.attr("height", h / writdata.length - barpadding)
		.attr("class", "writdata")
		/*.on("click", function() {
		        sortBars();
		});*/
		
	// DISPLAY STAGGERED ELECTION BARS
	svg.append("g")
		.append("rect")
		.attr("x", (writData1[0] * 5) + margin.left)
		.attr("y", writData1[2] * (h / writdata.length))
		.attr("width", (writData1[1] - writData1[0]) * 5)
		.attr("height", h / writdata.length - barpadding)
		.attr("class", "writbar1")
		.attr("fill", "grey");
		
	svg.append("g")
		.append("rect")
		.attr("x", (writData2[0] * 5) + margin.left)
		.attr("y", writData2[2] * (h / writdata.length))
		.attr("width", (writData2[1] - writData2[0]) * 5)
		.attr("height", h / writdata.length - barpadding)
		.attr("class", "writbar1")
		.attr("fill", "grey");

	// DISPLAY WRIT LABELS
	svg.selectAll("writdatalabel")
		.data(writdata)
		.enter()
		.append("text")
		.text(function(d, i) {
			return(writLabels[i]);
		})
		.attr("x", function(d, i) {
			if (writLabels[i].length <= 2) {
				return d * 5 + margin.left - 25;
			} else if (writLabels.length - i == 2) {
				return writData2[1] * 5 + margin.left - 37;
			} else {
				return writData1[1] * 5 + margin.left - 37;
			}
	   })
	   .attr("y", function(d, i) {
		   return i * (h / writdata.length) + 17;
	   })
	   .attr("class", "writdatalabel");
});



</script>

<div class="chart"></div>

Source: [Parliament of Canada](http://www.parl.gc.ca/about/parliament/PARLINFO/infography/LengthFederalElection-e.htm)

Retrieved August 27, at 4:00pm PST

[CBC](http://www.cbc.ca/news/politics/canada-election-2015-stephen-harper-confirms-start-of-11-week-federal-campaign-1.3175136)

